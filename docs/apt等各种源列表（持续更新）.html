<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<!-- vercel统计 -->
<script>
  window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
</script>
<script defer src="/_vercel/insights/script.js"></script>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hackerbs.com","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.14.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac","show_result":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="操作系统源使用源时务必注意版本 若你的系统不是最新版，可以使用snullp大佬开发的配置生成器 中科大debian apt源（最新debian12 bookworm版）我个人觉得中科大源更好些，且在中科大下载iso也比清华快些，如需使用清华源，将ustc替换为tuna.tsinghua即可，其他配置同理 1234567891011deb https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;de">
<meta property="og:type" content="article">
<meta property="og:title" content="apt等各种源列表（持续更新）">
<meta property="og:url" content="https://hackerbs.com/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.html">
<meta property="og:site_name" content="hackerbs&#39;s Blog - 探索知识的宇宙">
<meta property="og:description" content="操作系统源使用源时务必注意版本 若你的系统不是最新版，可以使用snullp大佬开发的配置生成器 中科大debian apt源（最新debian12 bookworm版）我个人觉得中科大源更好些，且在中科大下载iso也比清华快些，如需使用清华源，将ustc替换为tuna.tsinghua即可，其他配置同理 1234567891011deb https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;de">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-01-28T11:12:01.000Z">
<meta property="article:modified_time" content="2024-06-12T10:36:32.584Z">
<meta property="article:author" content="hackerbs.com">
<meta property="article:tag" content="apt源">
<meta property="article:tag" content="docker源">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hackerbs.com/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://hackerbs.com/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.html","path":"apt等各种源列表（持续更新）.html","title":"apt等各种源列表（持续更新）"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>apt等各种源列表（持续更新） | hackerbs's Blog - 探索知识的宇宙</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ENLG4193WB"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-ENLG4193WB","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>



  <script data-pjax defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{&quot;token&quot;: &quot;5eb3e0169ac749219c5fa4aeb27aa7b8&quot;}'></script>




<link rel="dns-prefetch" href="https://waline.hackerbs.com">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">hackerbs's Blog - 探索知识的宇宙</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">本站网盘地址：https://disk.ygeit.cn/s/RpAtcoJcbpYtaoa</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%BA%90"><span class="nav-number">1.</span> <span class="nav-text">操作系统源</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E7%A7%91%E5%A4%A7debian-apt%E6%BA%90%EF%BC%88%E6%9C%80%E6%96%B0debian12-bookworm%E7%89%88%EF%BC%89"><span class="nav-number">1.1.</span> <span class="nav-text">中科大debian apt源（最新debian12 bookworm版）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E7%A7%91%E5%A4%A7ubuntu-apt%E6%BA%90%EF%BC%88%E6%9C%80%E6%96%B0ubuntu24-04-noble%E6%BA%90%EF%BC%89"><span class="nav-number">1.2.</span> <span class="nav-text">中科大ubuntu apt源（最新ubuntu24.04 noble源）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E7%A7%91%E5%A4%A7docker-ce%E6%BA%90%EF%BC%88%E5%AE%89%E8%A3%85docker%E7%9A%84%E6%BA%90%EF%BC%8C%E4%B8%80%E9%94%AE%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">中科大docker ce源（安装docker的源，一键自动安装）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E6%BA%90"><span class="nav-number">2.</span> <span class="nav-text">软件源</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E7%A7%91%E5%A4%A7docker-hub%E6%BA%90"><span class="nav-number">2.1.</span> <span class="nav-text">中科大docker hub源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E7%A7%91%E5%A4%A7npm%E6%BA%90%EF%BC%88%E5%8F%8D%E4%BB%A3%E7%9A%84https-registry-npmjs-org-%EF%BC%89"><span class="nav-number">2.2.</span> <span class="nav-text">中科大npm源（反代的https:&#x2F;&#x2F;registry.npmjs.org&#x2F;）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6PyPI%E6%BA%90%E9%98%BF%E9%87%8C%E4%BA%91PyPI%E6%BA%90"><span class="nav-number">2.3.</span> <span class="nav-text">清华大学PyPI源阿里云PyPI源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E7%A7%91%E5%A4%A7Qt%E9%95%9C%E5%83%8F"><span class="nav-number">2.4.</span> <span class="nav-text">中科大Qt镜像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#github-release%E9%95%9C%E5%83%8F%EF%BC%88%E4%BB%85%E9%83%A8%E5%88%86%E4%BB%93%E5%BA%93%EF%BC%89"><span class="nav-number">2.5.</span> <span class="nav-text">github release镜像（仅部分仓库）</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">hackerbs.com</p>
  <div class="site-description" itemprop="description">hackerbs's Blog - 探索知识的宇宙</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hackerbs.com/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hackerbs.com">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hackerbs's Blog - 探索知识的宇宙">
      <meta itemprop="description" content="hackerbs's Blog - 探索知识的宇宙">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="apt等各种源列表（持续更新） | hackerbs's Blog - 探索知识的宇宙">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          apt等各种源列表（持续更新）<a href="https://github.com/1949hacker/blog/tree/main/source/_posts/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-28 19:12:01" itemprop="dateCreated datePublished" datetime="2024-01-28T19:12:01+08:00">2024-01-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-06-12 18:36:32" itemprop="dateModified" datetime="2024-06-12T18:36:32+08:00">2024-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.html#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>13 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="操作系统源"><a href="#操作系统源" class="headerlink" title="操作系统源"></a>操作系统源</h1><p><strong>使用源时务必注意版本</strong></p>
<p>若你的系统不是最新版，可以使用<em>snullp</em>大佬开发的<a target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/repogen/">配置生成器</a></p>
<h2 id="中科大debian-apt源（最新debian12-bookworm版）"><a href="#中科大debian-apt源（最新debian12-bookworm版）" class="headerlink" title="中科大debian apt源（最新debian12 bookworm版）"></a>中科大debian apt源（最新debian12 bookworm版）</h2><p><strong>我个人觉得中科大源更好些，且在中科大下载iso也比清华快些，如需使用清华源，将ustc替换为tuna.tsinghua即可，其他配置同理</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bookworm main contrib non-free non-free-firmware</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/debian/ bookworm main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian-security/ bookworm-security main contrib non-free non-free-firmware</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/debian-security/ bookworm-security main contrib non-free non-free-firmware</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="中科大ubuntu-apt源（最新ubuntu24-04-noble源）"><a href="#中科大ubuntu-apt源（最新ubuntu24-04-noble源）" class="headerlink" title="中科大ubuntu apt源（最新ubuntu24.04 noble源）"></a>中科大ubuntu apt源（最新ubuntu24.04 noble源）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ noble main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ noble main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ noble-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ noble-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ noble-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ noble-updates main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ noble-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ noble-backports main restricted universe multiverse</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Not recommended</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb https://mirrors.ustc.edu.cn/ubuntu/ noble-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.ustc.edu.cn/ubuntu/ noble-proposed main restricted universe multiverse</span></span><br></pre></td></tr></table></figure>

<h2 id="中科大docker-ce源（安装docker的源，一键自动安装）"><a href="#中科大docker-ce源（安装docker的源，一键自动安装）" class="headerlink" title="中科大docker ce源（安装docker的源，一键自动安装）"></a>中科大docker ce源（安装docker的源，一键自动安装）</h2><p><strong>因为<code>https://get.docker.com</code>已经上不去了，所以该方式作废</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh &amp;&amp; sudo DOWNLOAD_URL=https://mirrors.ustc.edu.cn/docker-ce sh get-docker.sh</span><br></pre></td></tr></table></figure>

<p>下面提供<code>get-docker.sh</code>的代码内容，直接<code>vim get-docker.sh</code>然后<code>chmod +x get-docker.sh</code>即可，然后使用<code>DOWNLOAD_URL=https://mirrors.ustc.edu.cn/docker-ce sh get-docker.sh</code>即可通过中科大源完成安装，代码如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line">set -e</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Docker Engine <span class="keyword">for</span> Linux installation script.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># This script is intended as a convenient way to configure docker&#x27;s package</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">repositories and to install Docker Engine, This script is not recommended</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">for</span> production environments. Before running this script, make yourself familiar</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">with potential risks and limitations, and refer to the installation manual</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">at https://docs.docker.com/engine/install/ <span class="keyword">for</span> alternative installation methods.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># The script:</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># - Requires `root` or `sudo` privileges to run.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">- Attempts to detect your Linux distribution and version and configure your</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  package management system <span class="keyword">for</span> you.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">- Doesn<span class="string">&#x27;t allow you to customize most installation parameters.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">- Installs dependencies and recommendations without asking for confirmation.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">- Installs the latest stable release (by default) of Docker CLI, Docker Engine,</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">  Docker Buildx, Docker Compose, containerd, and runc. When using this script</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">  to provision a machine, this may result in unexpected major version upgrades</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">  of these packages. Always test upgrades in a test environment before</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">  deploying to your production systems.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">- Isn&#x27;</span>t designed to upgrade an existing Docker installation. When using the</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  script to update an existing installation, dependencies may not be updated</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  to the expected version, resulting <span class="keyword">in</span> outdated versions.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Source code is available at https://github.com/docker/docker-install/</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Usage</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">==============================================================================</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># To install the latest stable versions of Docker CLI, Docker Engine, and their</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dependencies:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># 1. download the script</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   $ curl -fsSL https://get.docker.com -o install-docker.sh</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># 2. verify the script&#x27;s content</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   $ cat install-docker.sh</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># 3. run the script with --dry-run to verify the steps it executes</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   $ sh install-docker.sh --dry-run</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># 4. run the script either as root, or using sudo to perform the installation.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   $ sudo sh install-docker.sh</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Command-line options</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">==============================================================================</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># --version &lt;VERSION&gt;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Use the --version option to install a specific version, <span class="keyword">for</span> example:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   $ sudo sh install-docker.sh --version 23.0</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># --channel &lt;stable|test&gt;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Use the --channel option to install from an alternative installation channel.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The following example installs the latest versions from the <span class="string">&quot;test&quot;</span> channel,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">which</span> includes pre-releases (alpha, beta, rc):</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   $ sudo sh install-docker.sh --channel test</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Alternatively, use the script at https://test.docker.com, which uses the test</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">channel as default.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># --mirror &lt;Aliyun|AzureChinaCloud&gt;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Use the --mirror option to install from a mirror supported by this script.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Available mirrors are <span class="string">&quot;Aliyun&quot;</span> (https://mirrors.aliyun.com/docker-ce), and</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">&quot;AzureChinaCloud&quot;</span> (https://mirror.azure.cn/docker-ce), <span class="keyword">for</span> example:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   $ sudo sh install-docker.sh --mirror AzureChinaCloud</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ==============================================================================</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Git commit from https://github.com/docker/docker-install when</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">the script was uploaded (Should only be modified by upload job):</span></span><br><span class="line">SCRIPT_COMMIT_SHA=&quot;6d9743e9656cc56f699a64800b098d5ea5a60020&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">strip <span class="string">&quot;v&quot;</span> prefix <span class="keyword">if</span> present</span></span><br><span class="line">VERSION=&quot;$&#123;VERSION#v&#125;&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The channel to install from:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  * stable</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  * <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  * edge (deprecated)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  * nightly (deprecated)</span></span><br><span class="line">DEFAULT_CHANNEL_VALUE=&quot;stable&quot;</span><br><span class="line">if [ -z &quot;$CHANNEL&quot; ]; then</span><br><span class="line">        CHANNEL=$DEFAULT_CHANNEL_VALUE</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">DEFAULT_DOWNLOAD_URL=&quot;https://download.docker.com&quot;</span><br><span class="line">if [ -z &quot;$DOWNLOAD_URL&quot; ]; then</span><br><span class="line">        DOWNLOAD_URL=$DEFAULT_DOWNLOAD_URL</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">DEFAULT_REPO_FILE=&quot;docker-ce.repo&quot;</span><br><span class="line">if [ -z &quot;$REPO_FILE&quot; ]; then</span><br><span class="line">        REPO_FILE=&quot;$DEFAULT_REPO_FILE&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">mirror=&#x27;&#x27;</span><br><span class="line">DRY_RUN=$&#123;DRY_RUN:-&#125;</span><br><span class="line">while [ $# -gt 0 ]; do</span><br><span class="line">        case &quot;$1&quot; in</span><br><span class="line">                --channel)</span><br><span class="line">                        CHANNEL=&quot;$2&quot;</span><br><span class="line">                        shift</span><br><span class="line">                        ;;</span><br><span class="line">                --dry-run)</span><br><span class="line">                        DRY_RUN=1</span><br><span class="line">                        ;;</span><br><span class="line">                --mirror)</span><br><span class="line">                        mirror=&quot;$2&quot;</span><br><span class="line">                        shift</span><br><span class="line">                        ;;</span><br><span class="line">                --version)</span><br><span class="line">                        VERSION=&quot;$&#123;2#v&#125;&quot;</span><br><span class="line">                        shift</span><br><span class="line">                        ;;</span><br><span class="line">                --*)</span><br><span class="line">                        echo &quot;Illegal option $1&quot;</span><br><span class="line">                        ;;</span><br><span class="line">        esac</span><br><span class="line">        shift $(( $# &gt; 0 ? 1 : 0 ))</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">case &quot;$mirror&quot; in</span><br><span class="line">        Aliyun)</span><br><span class="line">                DOWNLOAD_URL=&quot;https://mirrors.aliyun.com/docker-ce&quot;</span><br><span class="line">                ;;</span><br><span class="line">        AzureChinaCloud)</span><br><span class="line">                DOWNLOAD_URL=&quot;https://mirror.azure.cn/docker-ce&quot;</span><br><span class="line">                ;;</span><br><span class="line">        &quot;&quot;)</span><br><span class="line">                ;;</span><br><span class="line">        *)</span><br><span class="line">                &gt;&amp;2 echo &quot;unknown mirror &#x27;$mirror&#x27;: use either &#x27;Aliyun&#x27;, or &#x27;AzureChinaCloud&#x27;.&quot;</span><br><span class="line">                exit 1</span><br><span class="line">                ;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line">case &quot;$CHANNEL&quot; in</span><br><span class="line">        stable|test)</span><br><span class="line">                ;;</span><br><span class="line">        edge|nightly)</span><br><span class="line">                &gt;&amp;2 echo &quot;DEPRECATED: the $CHANNEL channel has been deprecated and is no longer supported by this script.&quot;</span><br><span class="line">                exit 1</span><br><span class="line">                ;;</span><br><span class="line">        *)</span><br><span class="line">                &gt;&amp;2 echo &quot;unknown CHANNEL &#x27;$CHANNEL&#x27;: use either stable or test.&quot;</span><br><span class="line">                exit 1</span><br><span class="line">                ;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line">command_exists() &#123;</span><br><span class="line">        command -v &quot;$@&quot; &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_gte checks <span class="keyword">if</span> the version specified <span class="keyword">in</span> <span class="variable">$VERSION</span> is at least the given</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SemVer (Maj.Minor[.Patch]), or CalVer (YY.MM) version.It returns 0 (success)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> <span class="variable">$VERSION</span> is either <span class="built_in">unset</span> (=latest) or newer or equal than the specified</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version, or returns 1 (fail) otherwise.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># examples:</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># VERSION=23.0</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_gte 23.0  // 0 (success)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_gte 20.10 // 0 (success)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_gte 19.03 // 0 (success)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_gte 21.10 // 1 (fail)</span></span><br><span class="line">version_gte() &#123;</span><br><span class="line">        if [ -z &quot;$VERSION&quot; ]; then</span><br><span class="line">                        return 0</span><br><span class="line">        fi</span><br><span class="line">        eval version_compare &quot;$VERSION&quot; &quot;$1&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_compare compares two version strings (either SemVer (Major.Minor.Path),</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or CalVer (YY.MM) version strings. It returns 0 (success) <span class="keyword">if</span> version A is newer</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or equal than version B, or 1 (fail) otherwise. Patch releases and pre-release</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">(-alpha/-beta) are not taken into account</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># examples:</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># version_compare 23.0.0 20.10 // 0 (success)</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_compare 23.0 20.10   // 0 (success)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_compare 20.10 19.03  // 0 (success)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_compare 20.10 20.10  // 0 (success)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">version_compare 19.03 20.10  // 1 (fail)</span></span><br><span class="line">version_compare() (</span><br><span class="line">        set +x</span><br><span class="line"></span><br><span class="line">        yy_a=&quot;$(echo &quot;$1&quot; | cut -d&#x27;.&#x27; -f1)&quot;</span><br><span class="line">        yy_b=&quot;$(echo &quot;$2&quot; | cut -d&#x27;.&#x27; -f1)&quot;</span><br><span class="line">        if [ &quot;$yy_a&quot; -lt &quot;$yy_b&quot; ]; then</span><br><span class="line">                return 1</span><br><span class="line">        fi</span><br><span class="line">        if [ &quot;$yy_a&quot; -gt &quot;$yy_b&quot; ]; then</span><br><span class="line">                return 0</span><br><span class="line">        fi</span><br><span class="line">        mm_a=&quot;$(echo &quot;$1&quot; | cut -d&#x27;.&#x27; -f2)&quot;</span><br><span class="line">        mm_b=&quot;$(echo &quot;$2&quot; | cut -d&#x27;.&#x27; -f2)&quot;</span><br><span class="line"></span><br><span class="line">        # trim leading zeros to accommodate CalVer</span><br><span class="line">        mm_a=&quot;$&#123;mm_a#0&#125;&quot;</span><br><span class="line">        mm_b=&quot;$&#123;mm_b#0&#125;&quot;</span><br><span class="line"></span><br><span class="line">        if [ &quot;$&#123;mm_a:-0&#125;&quot; -lt &quot;$&#123;mm_b:-0&#125;&quot; ]; then</span><br><span class="line">                return 1</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        return 0</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">is_dry_run() &#123;</span><br><span class="line">        if [ -z &quot;$DRY_RUN&quot; ]; then</span><br><span class="line">                return 1</span><br><span class="line">        else</span><br><span class="line">                return 0</span><br><span class="line">        fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">is_wsl() &#123;</span><br><span class="line">        case &quot;$(uname -r)&quot; in</span><br><span class="line">        *microsoft* ) true ;; # WSL 2</span><br><span class="line">        *Microsoft* ) true ;; # WSL 1</span><br><span class="line">        * ) false;;</span><br><span class="line">        esac</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">is_darwin() &#123;</span><br><span class="line">        case &quot;$(uname -s)&quot; in</span><br><span class="line">        *darwin* ) true ;;</span><br><span class="line">        *Darwin* ) true ;;</span><br><span class="line">        * ) false;;</span><br><span class="line">        esac</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">deprecation_notice() &#123;</span><br><span class="line">        distro=$1</span><br><span class="line">        distro_version=$2</span><br><span class="line">        echo</span><br><span class="line">        printf &quot;\033[91;1mDEPRECATION WARNING\033[0m\n&quot;</span><br><span class="line">        printf &quot;    This Linux distribution (\033[1m%s %s\033[0m) reached end-of-life and is no longer supported by this script.\n&quot; &quot;$distro&quot; &quot;$distro_version&quot;</span><br><span class="line">        echo   &quot;    No updates or security fixes will be released for this distribution, and users are recommended&quot;</span><br><span class="line">        echo   &quot;    to upgrade to a currently maintained version of $distro.&quot;</span><br><span class="line">        echo</span><br><span class="line">        printf   &quot;Press \033[1mCtrl+C\033[0m now to abort this script, or wait for the installation to continue.&quot;</span><br><span class="line">        echo</span><br><span class="line">        sleep 10</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">get_distribution() &#123;</span><br><span class="line">        lsb_dist=&quot;&quot;</span><br><span class="line">        # Every system that we officially support has /etc/os-release</span><br><span class="line">        if [ -r /etc/os-release ]; then</span><br><span class="line">                lsb_dist=&quot;$(. /etc/os-release &amp;&amp; echo &quot;$ID&quot;)&quot;</span><br><span class="line">        fi</span><br><span class="line">        # Returning an empty string here should be alright since the</span><br><span class="line">        # case statements don&#x27;t act unless you provide an actual value</span><br><span class="line">        echo &quot;$lsb_dist&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo_docker_as_nonroot() &#123;</span><br><span class="line">        if is_dry_run; then</span><br><span class="line">                return</span><br><span class="line">        fi</span><br><span class="line">        if command_exists docker &amp;&amp; [ -e /var/run/docker.sock ]; then</span><br><span class="line">                (</span><br><span class="line">                        set -x</span><br><span class="line">                        $sh_c &#x27;docker version&#x27;</span><br><span class="line">                ) || true</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        # intentionally mixed spaces and tabs here -- tabs are stripped by &quot;&lt;&lt;-EOF&quot;, spaces are kept in the output</span><br><span class="line">        echo</span><br><span class="line">        echo &quot;================================================================================&quot;</span><br><span class="line">        echo</span><br><span class="line">        if version_gte &quot;20.10&quot;; then</span><br><span class="line">                echo &quot;To run Docker as a non-privileged user, consider setting up the&quot;</span><br><span class="line">                echo &quot;Docker daemon in rootless mode for your user:&quot;</span><br><span class="line">                echo</span><br><span class="line">                echo &quot;    dockerd-rootless-setuptool.sh install&quot;</span><br><span class="line">                echo</span><br><span class="line">                echo &quot;Visit https://docs.docker.com/go/rootless/ to learn about rootless mode.&quot;</span><br><span class="line">                echo</span><br><span class="line">        fi</span><br><span class="line">        echo</span><br><span class="line">        echo &quot;To run the Docker daemon as a fully privileged service, but granting non-root&quot;</span><br><span class="line">        echo &quot;users access, refer to https://docs.docker.com/go/daemon-access/&quot;</span><br><span class="line">        echo</span><br><span class="line">        echo &quot;WARNING: Access to the remote API on a privileged Docker daemon is equivalent&quot;</span><br><span class="line">        echo &quot;         to root access on the host. Refer to the &#x27;Docker daemon attack surface&#x27;&quot;</span><br><span class="line">        echo &quot;         documentation for details: https://docs.docker.com/go/attack-surface/&quot;</span><br><span class="line">        echo</span><br><span class="line">        echo &quot;================================================================================&quot;</span><br><span class="line">        echo</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Check <span class="keyword">if</span> this is a forked Linux distro</span></span><br><span class="line">check_forked() &#123;</span><br><span class="line"></span><br><span class="line">        # Check for lsb_release command existence, it usually exists in forked distros</span><br><span class="line">        if command_exists lsb_release; then</span><br><span class="line">                # Check if the `-u` option is supported</span><br><span class="line">                set +e</span><br><span class="line">                lsb_release -a -u &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">                lsb_release_exit_code=$?</span><br><span class="line">                set -e</span><br><span class="line"></span><br><span class="line">                # Check if the command has exited successfully, it means we&#x27;re in a forked distro</span><br><span class="line">                if [ &quot;$lsb_release_exit_code&quot; = &quot;0&quot; ]; then</span><br><span class="line">                        # Print info about current distro</span><br><span class="line">                        cat &lt;&lt;-EOF</span><br><span class="line">                        You&#x27;re using &#x27;$lsb_dist&#x27; version &#x27;$dist_version&#x27;.</span><br><span class="line">                        EOF</span><br><span class="line"></span><br><span class="line">                        # Get the upstream release info</span><br><span class="line">                        lsb_dist=$(lsb_release -a -u 2&gt;&amp;1 | tr &#x27;[:upper:]&#x27; &#x27;[:lower:]&#x27; | grep -E &#x27;id&#x27; | cut -d &#x27;:&#x27; -f 2 | tr -d &#x27;[:space:]&#x27;)</span><br><span class="line">                        dist_version=$(lsb_release -a -u 2&gt;&amp;1 | tr &#x27;[:upper:]&#x27; &#x27;[:lower:]&#x27; | grep -E &#x27;codename&#x27; | cut -d &#x27;:&#x27; -f 2 | tr -d &#x27;[:space:]&#x27;)</span><br><span class="line"></span><br><span class="line">                        # Print info about upstream distro</span><br><span class="line">                        cat &lt;&lt;-EOF</span><br><span class="line">                        Upstream release is &#x27;$lsb_dist&#x27; version &#x27;$dist_version&#x27;.</span><br><span class="line">                        EOF</span><br><span class="line">                else</span><br><span class="line">                        if [ -r /etc/debian_version ] &amp;&amp; [ &quot;$lsb_dist&quot; != &quot;ubuntu&quot; ] &amp;&amp; [ &quot;$lsb_dist&quot; != &quot;raspbian&quot; ]; then</span><br><span class="line">                                if [ &quot;$lsb_dist&quot; = &quot;osmc&quot; ]; then</span><br><span class="line">                                        # OSMC runs Raspbian</span><br><span class="line">                                        lsb_dist=raspbian</span><br><span class="line">                                else</span><br><span class="line">                                        # We&#x27;re Debian and don&#x27;t even know it!</span><br><span class="line">                                        lsb_dist=debian</span><br><span class="line">                                fi</span><br><span class="line">                                dist_version=&quot;$(sed &#x27;s/\/.*//&#x27; /etc/debian_version | sed &#x27;s/\..*//&#x27;)&quot;</span><br><span class="line">                                case &quot;$dist_version&quot; in</span><br><span class="line">                                        12)</span><br><span class="line">                                                dist_version=&quot;bookworm&quot;</span><br><span class="line">                                        ;;</span><br><span class="line">                                        11)</span><br><span class="line">                                                dist_version=&quot;bullseye&quot;</span><br><span class="line">                                        ;;</span><br><span class="line">                                        10)</span><br><span class="line">                                                dist_version=&quot;buster&quot;</span><br><span class="line">                                        ;;</span><br><span class="line">                                        9)</span><br><span class="line">                                                dist_version=&quot;stretch&quot;</span><br><span class="line">                                        ;;</span><br><span class="line">                                        8)</span><br><span class="line">                                                dist_version=&quot;jessie&quot;</span><br><span class="line">                                        ;;</span><br><span class="line">                                esac</span><br><span class="line">                        fi</span><br><span class="line">                fi</span><br><span class="line">        fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">do_install() &#123;</span><br><span class="line">        echo &quot;# Executing docker install script, commit: $SCRIPT_COMMIT_SHA&quot;</span><br><span class="line"></span><br><span class="line">        if command_exists docker; then</span><br><span class="line">                cat &gt;&amp;2 &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">                        Warning: the &quot;docker&quot; command appears to already exist on this system.</span><br><span class="line"></span><br><span class="line">                        If you already have Docker installed, this script can cause trouble, which is</span><br><span class="line">                        why we&#x27;re displaying this warning and provide the opportunity to cancel the</span><br><span class="line">                        installation.</span><br><span class="line"></span><br><span class="line">                        If you installed the current Docker package using this script and are using it</span><br><span class="line">                        again to update Docker, you can safely ignore this message.</span><br><span class="line"></span><br><span class="line">                        You may press Ctrl+C now to abort this script.</span><br><span class="line">                EOF</span><br><span class="line">                ( set -x; sleep 20 )</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        user=&quot;$(id -un 2&gt;/dev/null || true)&quot;</span><br><span class="line"></span><br><span class="line">        sh_c=&#x27;sh -c&#x27;</span><br><span class="line">        if [ &quot;$user&quot; != &#x27;root&#x27; ]; then</span><br><span class="line">                if command_exists sudo; then</span><br><span class="line">                        sh_c=&#x27;sudo -E sh -c&#x27;</span><br><span class="line">                elif command_exists su; then</span><br><span class="line">                        sh_c=&#x27;su -c&#x27;</span><br><span class="line">                else</span><br><span class="line">                        cat &gt;&amp;2 &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">                        Error: this installer needs the ability to run commands as root.</span><br><span class="line">                        We are unable to find either &quot;sudo&quot; or &quot;su&quot; available to make this happen.</span><br><span class="line">                        EOF</span><br><span class="line">                        exit 1</span><br><span class="line">                fi</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        if is_dry_run; then</span><br><span class="line">                sh_c=&quot;echo&quot;</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        # perform some very rudimentary platform detection</span><br><span class="line">        lsb_dist=$( get_distribution )</span><br><span class="line">        lsb_dist=&quot;$(echo &quot;$lsb_dist&quot; | tr &#x27;[:upper:]&#x27; &#x27;[:lower:]&#x27;)&quot;</span><br><span class="line"></span><br><span class="line">        if is_wsl; then</span><br><span class="line">                echo</span><br><span class="line">                echo &quot;WSL DETECTED: We recommend using Docker Desktop for Windows.&quot;</span><br><span class="line">                echo &quot;Please get Docker Desktop from https://www.docker.com/products/docker-desktop/&quot;</span><br><span class="line">                echo</span><br><span class="line">                cat &gt;&amp;2 &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line"></span><br><span class="line">                        You may press Ctrl+C now to abort this script.</span><br><span class="line">                EOF</span><br><span class="line">                ( set -x; sleep 20 )</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        case &quot;$lsb_dist&quot; in</span><br><span class="line"></span><br><span class="line">                ubuntu)</span><br><span class="line">                        if command_exists lsb_release; then</span><br><span class="line">                                dist_version=&quot;$(lsb_release --codename | cut -f2)&quot;</span><br><span class="line">                        fi</span><br><span class="line">                        if [ -z &quot;$dist_version&quot; ] &amp;&amp; [ -r /etc/lsb-release ]; then</span><br><span class="line">                                dist_version=&quot;$(. /etc/lsb-release &amp;&amp; echo &quot;$DISTRIB_CODENAME&quot;)&quot;</span><br><span class="line">                        fi</span><br><span class="line">                ;;</span><br><span class="line"></span><br><span class="line">                debian|raspbian)</span><br><span class="line">                        dist_version=&quot;$(sed &#x27;s/\/.*//&#x27; /etc/debian_version | sed &#x27;s/\..*//&#x27;)&quot;</span><br><span class="line">                        case &quot;$dist_version&quot; in</span><br><span class="line">                                12)</span><br><span class="line">                                        dist_version=&quot;bookworm&quot;</span><br><span class="line">                                ;;</span><br><span class="line">                                11)</span><br><span class="line">                                        dist_version=&quot;bullseye&quot;</span><br><span class="line">                                ;;</span><br><span class="line">                                10)</span><br><span class="line">                                        dist_version=&quot;buster&quot;</span><br><span class="line">                                ;;</span><br><span class="line">                                9)</span><br><span class="line">                                        dist_version=&quot;stretch&quot;</span><br><span class="line">                                ;;</span><br><span class="line">                                8)</span><br><span class="line">                                        dist_version=&quot;jessie&quot;</span><br><span class="line">                                ;;</span><br><span class="line">                        esac</span><br><span class="line">                ;;</span><br><span class="line"></span><br><span class="line">                centos|rhel)</span><br><span class="line">                        if [ -z &quot;$dist_version&quot; ] &amp;&amp; [ -r /etc/os-release ]; then</span><br><span class="line">                                dist_version=&quot;$(. /etc/os-release &amp;&amp; echo &quot;$VERSION_ID&quot;)&quot;</span><br><span class="line">                        fi</span><br><span class="line">                ;;</span><br><span class="line"></span><br><span class="line">                *)</span><br><span class="line">                        if command_exists lsb_release; then</span><br><span class="line">                                dist_version=&quot;$(lsb_release --release | cut -f2)&quot;</span><br><span class="line">                        fi</span><br><span class="line">                        if [ -z &quot;$dist_version&quot; ] &amp;&amp; [ -r /etc/os-release ]; then</span><br><span class="line">                                dist_version=&quot;$(. /etc/os-release &amp;&amp; echo &quot;$VERSION_ID&quot;)&quot;</span><br><span class="line">                        fi</span><br><span class="line">                ;;</span><br><span class="line"></span><br><span class="line">        esac</span><br><span class="line"></span><br><span class="line">        # Check if this is a forked Linux distro</span><br><span class="line">        check_forked</span><br><span class="line"></span><br><span class="line">        # Print deprecation warnings for distro versions that recently reached EOL,</span><br><span class="line">        # but may still be commonly used (especially LTS versions).</span><br><span class="line">        case &quot;$lsb_dist.$dist_version&quot; in</span><br><span class="line">                debian.stretch|debian.jessie)</span><br><span class="line">                        deprecation_notice &quot;$lsb_dist&quot; &quot;$dist_version&quot;</span><br><span class="line">                        ;;</span><br><span class="line">                raspbian.stretch|raspbian.jessie)</span><br><span class="line">                        deprecation_notice &quot;$lsb_dist&quot; &quot;$dist_version&quot;</span><br><span class="line">                        ;;</span><br><span class="line">                ubuntu.xenial|ubuntu.trusty)</span><br><span class="line">                        deprecation_notice &quot;$lsb_dist&quot; &quot;$dist_version&quot;</span><br><span class="line">                        ;;</span><br><span class="line">                ubuntu.lunar|ubuntu.kinetic|ubuntu.impish|ubuntu.hirsute|ubuntu.groovy|ubuntu.eoan|ubuntu.disco|ubuntu.cosmic)</span><br><span class="line">                        deprecation_notice &quot;$lsb_dist&quot; &quot;$dist_version&quot;</span><br><span class="line">                        ;;</span><br><span class="line">                fedora.*)</span><br><span class="line">                        if [ &quot;$dist_version&quot; -lt 36 ]; then</span><br><span class="line">                                deprecation_notice &quot;$lsb_dist&quot; &quot;$dist_version&quot;</span><br><span class="line">                        fi</span><br><span class="line">                        ;;</span><br><span class="line">        esac</span><br><span class="line"></span><br><span class="line">        # Run setup for each distro accordingly</span><br><span class="line">        case &quot;$lsb_dist&quot; in</span><br><span class="line">                ubuntu|debian|raspbian)</span><br><span class="line">                        pre_reqs=&quot;apt-transport-https ca-certificates curl&quot;</span><br><span class="line">                        apt_repo=&quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] $DOWNLOAD_URL/linux/$lsb_dist $dist_version $CHANNEL&quot;</span><br><span class="line">                        (</span><br><span class="line">                                if ! is_dry_run; then</span><br><span class="line">                                        set -x</span><br><span class="line">                                fi</span><br><span class="line">                                $sh_c &#x27;apt-get update -qq &gt;/dev/null&#x27;</span><br><span class="line">                                $sh_c &quot;DEBIAN_FRONTEND=noninteractive apt-get install -y -qq $pre_reqs &gt;/dev/null&quot;</span><br><span class="line">                                $sh_c &#x27;install -m 0755 -d /etc/apt/keyrings&#x27;</span><br><span class="line">                                $sh_c &quot;curl -fsSL \&quot;$DOWNLOAD_URL/linux/$lsb_dist/gpg\&quot; -o /etc/apt/keyrings/docker.asc&quot;</span><br><span class="line">                                $sh_c &quot;chmod a+r /etc/apt/keyrings/docker.asc&quot;</span><br><span class="line">                                $sh_c &quot;echo \&quot;$apt_repo\&quot; &gt; /etc/apt/sources.list.d/docker.list&quot;</span><br><span class="line">                                $sh_c &#x27;apt-get update -qq &gt;/dev/null&#x27;</span><br><span class="line">                        )</span><br><span class="line">                        pkg_version=&quot;&quot;</span><br><span class="line">                        if [ -n &quot;$VERSION&quot; ]; then</span><br><span class="line">                                if is_dry_run; then</span><br><span class="line">                                        echo &quot;# WARNING: VERSION pinning is not supported in DRY_RUN&quot;</span><br><span class="line">                                else</span><br><span class="line">                                        # Will work for incomplete versions IE (17.12), but may not actually grab the &quot;latest&quot; if in the test channel</span><br><span class="line">                                        pkg_pattern=&quot;$(echo &quot;$VERSION&quot; | sed &#x27;s/-ce-/~ce~.*/g&#x27; | sed &#x27;s/-/.*/g&#x27;)&quot;</span><br><span class="line">                                        search_command=&quot;apt-cache madison docker-ce | grep &#x27;$pkg_pattern&#x27; | head -1 | awk &#x27;&#123;\$1=\$1&#125;;1&#x27; | cut -d&#x27; &#x27; -f 3&quot;</span><br><span class="line">                                        pkg_version=&quot;$($sh_c &quot;$search_command&quot;)&quot;</span><br><span class="line">                                        echo &quot;INFO: Searching repository for VERSION &#x27;$VERSION&#x27;&quot;</span><br><span class="line">                                        echo &quot;INFO: $search_command&quot;</span><br><span class="line">                                        if [ -z &quot;$pkg_version&quot; ]; then</span><br><span class="line">                                                echo</span><br><span class="line">                                                echo &quot;ERROR: &#x27;$VERSION&#x27; not found amongst apt-cache madison results&quot;</span><br><span class="line">                                                echo</span><br><span class="line">                                                exit 1</span><br><span class="line">                                        fi</span><br><span class="line">                                        if version_gte &quot;18.09&quot;; then</span><br><span class="line">                                                        search_command=&quot;apt-cache madison docker-ce-cli | grep &#x27;$pkg_pattern&#x27; | head -1 | awk &#x27;&#123;\$1=\$1&#125;;1&#x27; | cut -d&#x27; &#x27; -f 3&quot;</span><br><span class="line">                                                        echo &quot;INFO: $search_command&quot;</span><br><span class="line">                                                        cli_pkg_version=&quot;=$($sh_c &quot;$search_command&quot;)&quot;</span><br><span class="line">                                        fi</span><br><span class="line">                                        pkg_version=&quot;=$pkg_version&quot;</span><br><span class="line">                                fi</span><br><span class="line">                        fi</span><br><span class="line">                        (</span><br><span class="line">                                pkgs=&quot;docker-ce$&#123;pkg_version%=&#125;&quot;</span><br><span class="line">                                if version_gte &quot;18.09&quot;; then</span><br><span class="line">                                                # older versions didn&#x27;t ship the cli and containerd as separate packages</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-ce-cli$&#123;cli_pkg_version%=&#125; containerd.io&quot;</span><br><span class="line">                                fi</span><br><span class="line">                                if version_gte &quot;20.10&quot;; then</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-compose-plugin docker-ce-rootless-extras$pkg_version&quot;</span><br><span class="line">                                fi</span><br><span class="line">                                if version_gte &quot;23.0&quot;; then</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-buildx-plugin&quot;</span><br><span class="line">                                fi</span><br><span class="line">                                if ! is_dry_run; then</span><br><span class="line">                                        set -x</span><br><span class="line">                                fi</span><br><span class="line">                                $sh_c &quot;DEBIAN_FRONTEND=noninteractive apt-get install -y -qq $pkgs &gt;/dev/null&quot;</span><br><span class="line">                        )</span><br><span class="line">                        echo_docker_as_nonroot</span><br><span class="line">                        exit 0</span><br><span class="line">                        ;;</span><br><span class="line">                centos|fedora|rhel)</span><br><span class="line">                        if [ &quot;$(uname -m)&quot; != &quot;s390x&quot; ] &amp;&amp; [ &quot;$lsb_dist&quot; = &quot;rhel&quot; ]; then</span><br><span class="line">                                echo &quot;Packages for RHEL are currently only available for s390x.&quot;</span><br><span class="line">                                exit 1</span><br><span class="line">                        fi</span><br><span class="line"></span><br><span class="line">                        if command_exists dnf; then</span><br><span class="line">                                pkg_manager=&quot;dnf&quot;</span><br><span class="line">                                pkg_manager_flags=&quot;--best&quot;</span><br><span class="line">                                config_manager=&quot;dnf config-manager&quot;</span><br><span class="line">                                enable_channel_flag=&quot;--set-enabled&quot;</span><br><span class="line">                                disable_channel_flag=&quot;--set-disabled&quot;</span><br><span class="line">                                pre_reqs=&quot;dnf-plugins-core&quot;</span><br><span class="line">                        else</span><br><span class="line">                                pkg_manager=&quot;yum&quot;</span><br><span class="line">                                pkg_manager_flags=&quot;&quot;</span><br><span class="line">                                config_manager=&quot;yum-config-manager&quot;</span><br><span class="line">                                enable_channel_flag=&quot;--enable&quot;</span><br><span class="line">                                disable_channel_flag=&quot;--disable&quot;</span><br><span class="line">                                pre_reqs=&quot;yum-utils&quot;</span><br><span class="line">                        fi</span><br><span class="line"></span><br><span class="line">                        if [ &quot;$lsb_dist&quot; = &quot;fedora&quot; ]; then</span><br><span class="line">                                pkg_suffix=&quot;fc$dist_version&quot;</span><br><span class="line">                        else</span><br><span class="line">                                pkg_suffix=&quot;el&quot;</span><br><span class="line">                        fi</span><br><span class="line">                        repo_file_url=&quot;$DOWNLOAD_URL/linux/$lsb_dist/$REPO_FILE&quot;</span><br><span class="line">                        (</span><br><span class="line">                                if ! is_dry_run; then</span><br><span class="line">                                        set -x</span><br><span class="line">                                fi</span><br><span class="line">                                $sh_c &quot;$pkg_manager $pkg_manager_flags install -y -q $pre_reqs&quot;</span><br><span class="line">                                $sh_c &quot;$config_manager --add-repo $repo_file_url&quot;</span><br><span class="line"></span><br><span class="line">                                if [ &quot;$CHANNEL&quot; != &quot;stable&quot; ]; then</span><br><span class="line">                                        $sh_c &quot;$config_manager $disable_channel_flag &#x27;docker-ce-*&#x27;&quot;</span><br><span class="line">                                        $sh_c &quot;$config_manager $enable_channel_flag &#x27;docker-ce-$CHANNEL&#x27;&quot;</span><br><span class="line">                                fi</span><br><span class="line">                                $sh_c &quot;$pkg_manager makecache&quot;</span><br><span class="line">                        )</span><br><span class="line">                        pkg_version=&quot;&quot;</span><br><span class="line">                        if [ -n &quot;$VERSION&quot; ]; then</span><br><span class="line">                                if is_dry_run; then</span><br><span class="line">                                        echo &quot;# WARNING: VERSION pinning is not supported in DRY_RUN&quot;</span><br><span class="line">                                else</span><br><span class="line">                                        pkg_pattern=&quot;$(echo &quot;$VERSION&quot; | sed &#x27;s/-ce-/\\\\.ce.*/g&#x27; | sed &#x27;s/-/.*/g&#x27;).*$pkg_suffix&quot;</span><br><span class="line">                                        search_command=&quot;$pkg_manager list --showduplicates docker-ce | grep &#x27;$pkg_pattern&#x27; | tail -1 | awk &#x27;&#123;print \$2&#125;&#x27;&quot;</span><br><span class="line">                                        pkg_version=&quot;$($sh_c &quot;$search_command&quot;)&quot;</span><br><span class="line">                                        echo &quot;INFO: Searching repository for VERSION &#x27;$VERSION&#x27;&quot;</span><br><span class="line">                                        echo &quot;INFO: $search_command&quot;</span><br><span class="line">                                        if [ -z &quot;$pkg_version&quot; ]; then</span><br><span class="line">                                                echo</span><br><span class="line">                                                echo &quot;ERROR: &#x27;$VERSION&#x27; not found amongst $pkg_manager list results&quot;</span><br><span class="line">                                                echo</span><br><span class="line">                                                exit 1</span><br><span class="line">                                        fi</span><br><span class="line">                                        if version_gte &quot;18.09&quot;; then</span><br><span class="line">                                                # older versions don&#x27;t support a cli package</span><br><span class="line">                                                search_command=&quot;$pkg_manager list --showduplicates docker-ce-cli | grep &#x27;$pkg_pattern&#x27; | tail -1 | awk &#x27;&#123;print \$2&#125;&#x27;&quot;</span><br><span class="line">                                                cli_pkg_version=&quot;$($sh_c &quot;$search_command&quot; | cut -d&#x27;:&#x27; -f 2)&quot;</span><br><span class="line">                                        fi</span><br><span class="line">                                        # Cut out the epoch and prefix with a &#x27;-&#x27;</span><br><span class="line">                                        pkg_version=&quot;-$(echo &quot;$pkg_version&quot; | cut -d&#x27;:&#x27; -f 2)&quot;</span><br><span class="line">                                fi</span><br><span class="line">                        fi</span><br><span class="line">                        (</span><br><span class="line">                                pkgs=&quot;docker-ce$pkg_version&quot;</span><br><span class="line">                                if version_gte &quot;18.09&quot;; then</span><br><span class="line">                                        # older versions didn&#x27;t ship the cli and containerd as separate packages</span><br><span class="line">                                        if [ -n &quot;$cli_pkg_version&quot; ]; then</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-ce-cli-$cli_pkg_version containerd.io&quot;</span><br><span class="line">                                        else</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-ce-cli containerd.io&quot;</span><br><span class="line">                                        fi</span><br><span class="line">                                fi</span><br><span class="line">                                if version_gte &quot;20.10&quot;; then</span><br><span class="line">                                        pkgs=&quot;$pkgs docker-compose-plugin docker-ce-rootless-extras$pkg_version&quot;</span><br><span class="line">                                fi</span><br><span class="line">                                if version_gte &quot;23.0&quot;; then</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-buildx-plugin&quot;</span><br><span class="line">                                fi</span><br><span class="line">                                if ! is_dry_run; then</span><br><span class="line">                                        set -x</span><br><span class="line">                                fi</span><br><span class="line">                                $sh_c &quot;$pkg_manager $pkg_manager_flags install -y -q $pkgs&quot;</span><br><span class="line">                        )</span><br><span class="line">                        echo_docker_as_nonroot</span><br><span class="line">                        exit 0</span><br><span class="line">                        ;;</span><br><span class="line">                sles)</span><br><span class="line">                        if [ &quot;$(uname -m)&quot; != &quot;s390x&quot; ]; then</span><br><span class="line">                                echo &quot;Packages for SLES are currently only available for s390x&quot;</span><br><span class="line">                                exit 1</span><br><span class="line">                        fi</span><br><span class="line">                        repo_file_url=&quot;$DOWNLOAD_URL/linux/$lsb_dist/$REPO_FILE&quot;</span><br><span class="line">                        pre_reqs=&quot;ca-certificates curl libseccomp2 awk&quot;</span><br><span class="line">                        (</span><br><span class="line">                                if ! is_dry_run; then</span><br><span class="line">                                        set -x</span><br><span class="line">                                fi</span><br><span class="line">                                $sh_c &quot;zypper install -y $pre_reqs&quot;</span><br><span class="line">                                $sh_c &quot;zypper addrepo $repo_file_url&quot;</span><br><span class="line">                                if ! is_dry_run; then</span><br><span class="line">                                                cat &gt;&amp;2 &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">                                                WARNING!!</span><br><span class="line">                                                openSUSE repository (https://download.opensuse.org/repositories/security:/SELinux) will be enabled now.</span><br><span class="line">                                                Do you wish to continue?</span><br><span class="line">                                                You may press Ctrl+C now to abort this script.</span><br><span class="line">                                                EOF</span><br><span class="line">                                                ( set -x; sleep 30 )</span><br><span class="line">                                fi</span><br><span class="line">                                opensuse_repo=&quot;https://download.opensuse.org/repositories/security:/SELinux/openSUSE_Factory/security:SELinux.repo&quot;</span><br><span class="line">                                $sh_c &quot;zypper addrepo $opensuse_repo&quot;</span><br><span class="line">                                $sh_c &quot;zypper --gpg-auto-import-keys refresh&quot;</span><br><span class="line">                                $sh_c &quot;zypper lr -d&quot;</span><br><span class="line">                        )</span><br><span class="line">                        pkg_version=&quot;&quot;</span><br><span class="line">                        if [ -n &quot;$VERSION&quot; ]; then</span><br><span class="line">                                if is_dry_run; then</span><br><span class="line">                                        echo &quot;# WARNING: VERSION pinning is not supported in DRY_RUN&quot;</span><br><span class="line">                                else</span><br><span class="line">                                        pkg_pattern=&quot;$(echo &quot;$VERSION&quot; | sed &#x27;s/-ce-/\\\\.ce.*/g&#x27; | sed &#x27;s/-/.*/g&#x27;)&quot;</span><br><span class="line">                                        search_command=&quot;zypper search -s --match-exact &#x27;docker-ce&#x27; | grep &#x27;$pkg_pattern&#x27; | tail -1 | awk &#x27;&#123;print \$6&#125;&#x27;&quot;</span><br><span class="line">                                        pkg_version=&quot;$($sh_c &quot;$search_command&quot;)&quot;</span><br><span class="line">                                        echo &quot;INFO: Searching repository for VERSION &#x27;$VERSION&#x27;&quot;</span><br><span class="line">                                        echo &quot;INFO: $search_command&quot;</span><br><span class="line">                                        if [ -z &quot;$pkg_version&quot; ]; then</span><br><span class="line">                                                echo</span><br><span class="line">                                                echo &quot;ERROR: &#x27;$VERSION&#x27; not found amongst zypper list results&quot;</span><br><span class="line">                                                echo</span><br><span class="line">                                                exit 1</span><br><span class="line">                                        fi</span><br><span class="line">                                        search_command=&quot;zypper search -s --match-exact &#x27;docker-ce-cli&#x27; | grep &#x27;$pkg_pattern&#x27; | tail -1 | awk &#x27;&#123;print \$6&#125;&#x27;&quot;</span><br><span class="line">                                        # It&#x27;s okay for cli_pkg_version to be blank, since older versions don&#x27;t support a cli package</span><br><span class="line">                                        cli_pkg_version=&quot;$($sh_c &quot;$search_command&quot;)&quot;</span><br><span class="line">                                        pkg_version=&quot;-$pkg_version&quot;</span><br><span class="line">                                fi</span><br><span class="line">                        fi</span><br><span class="line">                        (</span><br><span class="line">                                pkgs=&quot;docker-ce$pkg_version&quot;</span><br><span class="line">                                if version_gte &quot;18.09&quot;; then</span><br><span class="line">                                        if [ -n &quot;$cli_pkg_version&quot; ]; then</span><br><span class="line">                                                # older versions didn&#x27;t ship the cli and containerd as separate packages</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-ce-cli-$cli_pkg_version containerd.io&quot;</span><br><span class="line">                                        else</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-ce-cli containerd.io&quot;</span><br><span class="line">                                        fi</span><br><span class="line">                                fi</span><br><span class="line">                                if version_gte &quot;20.10&quot;; then</span><br><span class="line">                                        pkgs=&quot;$pkgs docker-compose-plugin docker-ce-rootless-extras$pkg_version&quot;</span><br><span class="line">                                fi</span><br><span class="line">                                if version_gte &quot;23.0&quot;; then</span><br><span class="line">                                                pkgs=&quot;$pkgs docker-buildx-plugin&quot;</span><br><span class="line">                                fi</span><br><span class="line">                                if ! is_dry_run; then</span><br><span class="line">                                        set -x</span><br><span class="line">                                fi</span><br><span class="line">                                $sh_c &quot;zypper -q install -y $pkgs&quot;</span><br><span class="line">                        )</span><br><span class="line">                        echo_docker_as_nonroot</span><br><span class="line">                        exit 0</span><br><span class="line">                        ;;</span><br><span class="line">                *)</span><br><span class="line">                        if [ -z &quot;$lsb_dist&quot; ]; then</span><br><span class="line">                                if is_darwin; then</span><br><span class="line">                                        echo</span><br><span class="line">                                        echo &quot;ERROR: Unsupported operating system &#x27;macOS&#x27;&quot;</span><br><span class="line">                                        echo &quot;Please get Docker Desktop from https://www.docker.com/products/docker-desktop&quot;</span><br><span class="line">                                        echo</span><br><span class="line">                                        exit 1</span><br><span class="line">                                fi</span><br><span class="line">                        fi</span><br><span class="line">                        echo</span><br><span class="line">                        echo &quot;ERROR: Unsupported distribution &#x27;$lsb_dist&#x27;&quot;</span><br><span class="line">                        echo</span><br><span class="line">                        exit 1</span><br><span class="line">                        ;;</span><br><span class="line">        esac</span><br><span class="line">        exit 1</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">wrapped up <span class="keyword">in</span> a <span class="keyword">function</span> so that we have some protection against only getting</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">half the file during <span class="string">&quot;curl | sh&quot;</span></span></span><br><span class="line">do_install</span><br></pre></td></tr></table></figure>

<h1 id="软件源"><a href="#软件源" class="headerlink" title="软件源"></a>软件源</h1><h2 id="中科大docker-hub源"><a href="#中科大docker-hub源" class="headerlink" title="中科大docker hub源"></a>中科大docker hub源</h2><p><strong>国内所有docker hub都GG了，官方hub也GG了，参照本站<code>国内docker hub无法使用的解决办法</code>文章处理</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/docker/daemon.json</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加以下内容</span></span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://docker.mirrors.ustc.edu.cn/&quot;]</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用root用户或具有sudo权限的用户加sudo后运行</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启docker</span></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h2 id="中科大npm源（反代的https-registry-npmjs-org-）"><a href="#中科大npm源（反代的https-registry-npmjs-org-）" class="headerlink" title="中科大npm源（反代的https://registry.npmjs.org/）"></a>中科大npm源（反代的<a target="_blank" rel="noopener" href="https://registry.npmjs.org/%EF%BC%89">https://registry.npmjs.org/）</a></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑~/.npmrc</span></span><br><span class="line">registry=https://npmreg.proxy.ustclug.org/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">临时使用中科大源安装软件包</span></span><br><span class="line">npm --registry https://npmreg.proxy.ustclug.org/ install 包名</span><br></pre></td></tr></table></figure>

<h2 id="清华大学PyPI源阿里云PyPI源"><a href="#清华大学PyPI源阿里云PyPI源" class="headerlink" title="清华大学PyPI源阿里云PyPI源"></a><del>清华大学PyPI源</del>阿里云PyPI源</h2><p>中科大PyPI源公告：<br>由于 PyPI 源日益增长的空间与 mirror 磁盘空间非常有限的矛盾和用户报告的 PyPI 源的诸多问题，以及考虑到 PyPI 源的资源占用对其他镜像服务质量的影响，我们暂时移除了对 PyPI 的本地镜像。即日起至新的 PyPI 源镜像方案实施前，本站 PyPI 源的 HTTP 协议访问将重定向到 TUNA PyPI 源；PyPI 源的 RSYNC 同步方式停止提供。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">临时使用</span></span><br><span class="line">pip install -i https://mirrors.aliyun.com/pypi/simple/ package</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用清华镜像站来升级 pip</span></span><br><span class="line">pip install -i https://mirrors.aliyun.com/pypi/simple/ pip -U</span><br><span class="line">pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure>

<h2 id="中科大Qt镜像"><a href="#中科大Qt镜像" class="headerlink" title="中科大Qt镜像"></a>中科大Qt镜像</h2><p><a target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/qtproject/official_releases/online_installers/">从中科大镜像下载Qt在线安装器</a></p>
<p>使用以下两种方式之一在安装器中配置使用科大源下载 Qt：</p>
<ol>
<li><p>（推荐）新版本的安装器（4.0.1-1 后）支持 –mirror 命令行参数。在命令行中执行安装器，添加 –mirror <a target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/qtproject">https://mirrors.ustc.edu.cn/qtproject</a> 参数。例如 Windows 下执行当前目录的安装器的命令为 .\qt-unified-windows-x86-online.exe –mirror <a target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/qtproject%EF%BC%9B">https://mirrors.ustc.edu.cn/qtproject；</a></p>
</li>
<li><p>或在启动安装器后在设置中禁用默认源，添加新源 <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/qtproject/online/qtsdkrepository/linux_x64/root/qt/">http://mirrors.ustc.edu.cn/qtproject/online/qtsdkrepository/linux_x64/root/qt/</a> （其他版本注意更改地址）。</p>
</li>
</ol>
<h2 id="github-release镜像（仅部分仓库）"><a href="#github-release镜像（仅部分仓库）" class="headerlink" title="github release镜像（仅部分仓库）"></a>github release镜像（仅部分仓库）</h2><p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/github-release/">清华大学</a></p>
<p><a target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/github-release/">中科大</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我喝冰阔落~</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="hackerbs.com 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="hackerbs.com 支付宝">
        <span>支付宝</span>
      </div>
      <div>
        <img src="/images/binance.jpg" alt="hackerbs.com binance">
        <span>binance</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>hackerbs.com
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://hackerbs.com/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.html" title="apt等各种源列表（持续更新）">https://hackerbs.com/apt等各种源列表（持续更新）.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/hacker1949">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="mailto:0@hackerbs.com">
            <span class="icon">
              <i class="fab fa-envelope"></i>
            </span>

            <span class="label">e-mail</span>
          </a>
      </div>

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </span>

          <img class="social-item-img" src="/images/wechat_channel.jpg">
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/apt%E6%BA%90/" rel="tag"># apt源</a>
              <a href="/tags/docker%E6%BA%90/" rel="tag"># docker源</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E7%A1%AC%E7%9B%98%E5%AE%B9%E9%87%8F%E4%B8%BA%E4%BD%95%E8%BE%BE%E4%B8%8D%E5%88%B0%E5%8E%82%E5%AE%B6%E6%A0%87%E7%A7%B0%E7%9A%84%E5%AE%B9%E9%87%8F%EF%BC%9F%E7%A1%AC%E7%9B%98%E5%AE%B9%E9%87%8F%E9%80%A0%E5%81%87%E7%BC%A9%E6%B0%B4%EF%BC%9F.html" rel="prev" title="硬盘容量为何达不到厂家标称的容量？硬盘容量造假缩水？">
                  <i class="fa fa-chevron-left"></i> 硬盘容量为何达不到厂家标称的容量？硬盘容量造假缩水？
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Proxmox-VE%E6%89%B9%E9%87%8F%E5%8A%A0%E9%9B%86%E7%BE%A4%E3%80%81%E6%89%B9%E9%87%8F%E5%85%8B%E9%9A%86%E3%80%81%E6%89%B9%E9%87%8F%E8%AE%BE%E7%BD%AE%E5%B9%B6%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4%E3%80%81%E6%89%B9%E9%87%8F%E6%B8%85%E9%99%A4%E9%9B%86%E7%BE%A4%E6%AE%8B%E7%95%99%E3%80%81%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E7%BD%91%E5%8D%A1%E7%AD%89%E4%B8%80%E7%AB%99%E5%BC%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%81%EF%BC%88%E6%9C%AC%E6%95%99%E7%A8%8B%E9%87%87%E7%94%A8YgeCloud%E5%AE%9E%E6%B5%8B%EF%BC%89.html" rel="next" title="Proxmox-VE批量加集群、批量克隆、批量设置并同步时间、批量清除集群残留、批量创建网卡等一站式解决方案！（本教程采用YgeCloud实测）">
                  Proxmox-VE批量加集群、批量克隆、批量设置并同步时间、批量清除集群残留、批量创建网卡等一站式解决方案！（本教程采用YgeCloud实测） <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hackerbs.com</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">34k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">2:02</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://waline.hackerbs.com","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎评论！","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":["nick"],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","admin":false,"theme":"waline-theme-onepiece","emojiCDN":"","emojiMaps":{},"emojiExt":".png","emojiSize":32,"CDN":"","dark":false,"el":"#waline","comment":true,"path":"/apt%E7%AD%89%E5%90%84%E7%A7%8D%E6%BA%90%E5%88%97%E8%A1%A8%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89.html"}</script>
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>

</body>
</html>
